<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebooks</title>
    <link rel="alternate" type="application/json" title="Notebook index" href="notebooks/notebook-index.json">
    <style>
        html {
            background-color: #ffffff;
            box-sizing: border-box;
        }
        *, *::before, *::after {
            box-sizing: inherit;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #ffffff;
            color: #333;
            overflow-x: hidden;
        }
        h1, h2 { 
            color: #333;
            font-weight: 400;
        }
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 48px clamp(20px, 6vw, 40px) 96px;
        }
        header {
            text-align: center;
            margin-bottom: 18px;
        }
        header h1 {
            margin-bottom: 5px;
        }
        .back-link {
            margin-bottom: 14px;
        }
        .back-link a {
            color: #0077cc;
            text-decoration: none;
        }
        .back-link a:hover {
            text-decoration: underline;
        }
        .controls {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            margin: 14px 0 0;
        }
        .toggle {
            display: inline-flex;
            align-items: baseline;
            gap: 10px;
        }
        .toggle-button {
            appearance: none;
            border: none;
            background: transparent;
            padding: 0;
            font-size: 14px;
            color: #888;
            cursor: pointer;
            text-decoration: none;
        }
        .toggle-button.is-active {
            color: #333;
            text-decoration: underline;
            text-underline-offset: 3px;
        }
        .toggle-button + .toggle-button::before {
            content: " / ";
            color: #bbb;
            margin-right: 10px;
        }
        .status {
            margin: 8px 0 18px;
            color: #888;
            font-size: 14px;
            min-height: 18px;
        }
        .status.is-empty {
            visibility: hidden;
        }
        .status a {
            color: inherit;
            text-decoration: none;
        }
        .status a:hover {
            text-decoration: underline;
        }
        .entry {
            margin-bottom: 16px;
        }
        .entry-title {
            margin: 0;
            font-size: 17px;
            font-weight: 300;
        }
        .entry-title a {
            color: #333;
            text-decoration: none;
        }
        .entry-title a:hover {
            text-decoration: underline;
        }
        .entry-meta {
            margin: 2px 0 0;
            color: #888;
            font-size: 13px;
        }
        .entry-meta a {
            color: inherit;
            text-decoration: none;
        }
        .entry-meta a:hover {
            text-decoration: underline;
        }
        .entry-date {
            font-variant-numeric: tabular-nums;
        }
        .collection-heading {
            margin: 28px 0 12px;
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }
        .collection {
            margin: 0 0 12px;
            padding: 0;
            border: 0;
        }
        .collection-summary {
            list-style: none;
            cursor: pointer;
            user-select: none;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            padding: 10px 0;
        }
        .collection-summary::-webkit-details-marker {
            display: none;
        }
        .collection-summary::before {
            content: "▸";
            display: inline-block;
            width: 16px;
            color: #aaa;
            margin-right: 6px;
            transform-origin: 50% 55%;
        }
        details[open] > .collection-summary::before {
            transform: rotate(90deg);
        }
        .collection-count {
            color: #999;
            font-weight: 400;
            font-size: 13px;
            margin-left: 6px;
        }
        .collection-entries {
            margin: 0 0 10px;
            padding-left: 22px;
        }
        body[data-view="collections"] .entry-collection,
        body[data-view="collections"] .entry-sep {
            display: none;
        }
        body[data-view="collections"] .entry {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="index.html">← Main page</a>
        </div>
        <header>
            <h1>Notebooks</h1>
        </header>

        <div class="controls">
            <div class="toggle" role="group" aria-label="Notebook view">
                <button type="button" class="toggle-button is-active" data-view="chronological">Chronological</button>
                <button type="button" class="toggle-button" data-view="collections">Collections</button>
            </div>
        </div>
        <div id="status" class="status" aria-live="polite"></div>
        
        <section id="notebook-entries" aria-live="polite">
            <!-- BEGIN AUTO-GENERATED NOTEBOOK LIST -->
            <div class="entry" data-title="Confluence of browsers, agents and apps" data-date="2025-10-30" data-collection="AI Systems" data-tags="ai,browsers">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-30-confluence-browser-agents.md" data-date="2025-10-30">Confluence of browsers, agents and apps</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-10-30</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=AI%20Systems">AI Systems</a></p>
            </div>

            <div class="entry" data-title="Autoformalization agents" data-date="2025-10-02" data-collection="Math &amp; Formal Methods" data-tags="math,ai,autoformalization">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-02-autoformalization-agents.md" data-date="2025-10-02">Autoformalization agents</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-10-02</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=Math%20%26%20Formal%20Methods">Math &amp; Formal Methods</a></p>
            </div>

            <div class="entry" data-title="New tasks and what matters" data-date="2025-10-01" data-collection="AI &amp; Society" data-tags="future,ai,work">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-01-new-tasks.md" data-date="2025-10-01">New tasks and what matters</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-10-01</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=AI%20%26%20Society">AI &amp; Society</a></p>
            </div>

            <div class="entry" data-title="Stablecoins and new units of account" data-date="2025-09-08" data-collection="Finance" data-tags="banking,money,finance,crypto">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-stablecoins.md" data-date="2025-09-08">Stablecoins and new units of account</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-09-08</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=Finance">Finance</a></p>
            </div>

            <div class="entry" data-title="Riding the displacement wave" data-date="2025-09-08" data-collection="AI &amp; Society" data-tags="ai,startups">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-08-riding-displacement.md" data-date="2025-09-08">Riding the displacement wave</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-09-08</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=AI%20%26%20Society">AI &amp; Society</a></p>
            </div>

            <div class="entry" data-title="RiskON 2025 design" data-date="2025-09-07" data-collection="Projects" data-tags="risk,hackathon">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-07-risk-on.md" data-date="2025-09-07">RiskON 2025 design</a></h3>
                <p class="entry-meta"><span class="entry-date">2025-09-07</span><span class="entry-sep"> · </span><a class="entry-collection" href="notebooks.html?collection=Projects">Projects</a></p>
            </div>
            <!-- END AUTO-GENERATED NOTEBOOK LIST -->
        </section>

        <noscript>
            <section aria-label="Notebook page without JavaScript" style="margin-top: 24px; color: #555;">
                <p>JavaScript is optional on this page; search and grouping are disabled without it.</p>
                <p style="color: #888;">The notebooks are also available directly as Markdown files under <code>notebooks/</code>.</p>
            </section>
        </noscript>
    </div>
    
    <script>
        (function () {
            const entriesContainer = document.getElementById('notebook-entries');
            const statusEl = document.getElementById('status');
            const toggleButtons = Array.from(document.querySelectorAll('.toggle-button[data-view]'));

            const params = new URLSearchParams(window.location.search);
            const initialView = String(params.get('view') || '').trim().toLowerCase();
            const initialTag = String(params.get('tag') || '').trim();
            const initialCollection = String(params.get('collection') || '').trim();
            const openCollection = String(params.get('open') || '').trim();

            const entryEls = Array.from(entriesContainer.querySelectorAll('.entry'));
            const entries = entryEls.map((el) => {
                const date = String(el.dataset.date || '').trim();
                const collection = String(el.dataset.collection || 'General').trim() || 'General';
                const tags = String(el.dataset.tags || '')
                    .split(',')
                    .map((t) => t.trim())
                    .filter(Boolean);
                const title = String(el.dataset.title || '').trim();
                return {
                    el,
                    date,
                    title,
                    collection,
                    collectionLower: collection.toLowerCase(),
                    tagsLower: tags.map((t) => t.toLowerCase()),
                };
            });

            const state = {
                view: initialView === 'collections' ? 'collections' : 'chronological',
                tag: initialTag.toLowerCase(),
                collection: initialCollection.toLowerCase()
            };

            function sortChronological(a, b) {
                if (a.date && b.date && a.date !== b.date) {
                    return b.date.localeCompare(a.date);
                }
                if (a.date && !b.date) {
                    return -1;
                }
                if (!a.date && b.date) {
                    return 1;
                }
                return a.title.localeCompare(b.title);
            }

            function entryMatches(entry, q) {
                if (state.collection && entry.collectionLower !== state.collection) {
                    return false;
                }
                if (state.tag && !entry.tagsLower.includes(state.tag)) {
                    return false;
                }
                return true;
            }

            function renderChronological(filtered) {
                entriesContainer.replaceChildren(...filtered.map((e) => e.el));
            }

            function renderCollections(filtered) {
                const byCollection = new Map();
                for (const entry of filtered) {
                    const key = entry.collection || 'General';
                    if (!byCollection.has(key)) {
                        byCollection.set(key, []);
                    }
                    byCollection.get(key).push(entry);
                }

                const collections = Array.from(byCollection.keys()).sort((a, b) => a.localeCompare(b));
                const nodes = [];

                for (const collection of collections) {
                    const details = document.createElement('details');
                    details.className = 'collection';
                    if (openCollection) {
                        if (openCollection.toLowerCase() === 'first' && nodes.length === 0) {
                            details.open = true;
                        } else if (collection.toLowerCase() === openCollection.toLowerCase()) {
                            details.open = true;
                        }
                    }

                    const summary = document.createElement('summary');
                    summary.className = 'collection-summary';
                    summary.appendChild(document.createTextNode(collection));

                    const count = document.createElement('span');
                    count.className = 'collection-count';
                    count.textContent = `(${byCollection.get(collection).length})`;
                    summary.appendChild(count);

                    details.appendChild(summary);

                    const groupEntries = byCollection.get(collection).slice().sort(sortChronological);
                    const entriesWrap = document.createElement('div');
                    entriesWrap.className = 'collection-entries';
                    for (const entry of groupEntries) {
                        entriesWrap.appendChild(entry.el);
                    }

                    details.appendChild(entriesWrap);
                    nodes.push(details);
                }

                entriesContainer.replaceChildren(...nodes);
            }

            function setView(view) {
                state.view = view;
                document.body.dataset.view = view;
                for (const btn of toggleButtons) {
                    btn.classList.toggle('is-active', btn.dataset.view === view);
                }
                apply();
            }

            function apply() {
                const filtered = entries.filter((entry) => entryMatches(entry)).slice().sort(sortChronological);

                if (entries.length === 0) {
                    statusEl.textContent = '';
                    statusEl.hidden = true;
                    statusEl.classList.add('is-empty');
                    return;
                }

                if (state.view === 'collections') {
                    renderCollections(filtered);
                } else {
                    renderChronological(filtered);
                }

                const showCount = filtered.length !== entries.length;
                const hasFilters = Boolean(state.collection || state.tag);
                if (!showCount && !hasFilters) {
                    statusEl.hidden = false;
                    statusEl.classList.add('is-empty');
                    statusEl.replaceChildren();
                    return;
                }

                statusEl.hidden = false;
                statusEl.classList.remove('is-empty');
                statusEl.replaceChildren();

                function addSep() {
                    statusEl.appendChild(document.createTextNode(' · '));
                }

                if (hasFilters) {
                    const a = document.createElement('a');
                    a.href = 'notebooks.html';
                    a.textContent = 'All';
                    statusEl.appendChild(a);
                }

                if (state.collection) {
                    if (statusEl.childNodes.length > 0) {
                        addSep();
                    }
                    statusEl.appendChild(document.createTextNode(`collection: ${state.collection}`));
                }

                if (state.tag) {
                    if (statusEl.childNodes.length > 0) {
                        addSep();
                    }
                    statusEl.appendChild(document.createTextNode(`tag: ${state.tag}`));
                }

                if (showCount) {
                    if (statusEl.childNodes.length > 0) {
                        addSep();
                    }
                    statusEl.appendChild(document.createTextNode(`${filtered.length} of ${entries.length}`));
                }
            }

            for (const btn of toggleButtons) {
                btn.addEventListener('click', () => setView(String(btn.dataset.view || 'chronological')));
            }

            setView(state.view);
        })();
    </script>
</body>
</html>
