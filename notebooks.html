<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notebooks</title>
    <link rel="alternate" type="application/json" title="Notebook index" href="notebooks/notebook-index.json">
    <style>
        html {
            background-color: #ffffff;
            box-sizing: border-box;
        }
        *, *::before, *::after {
            box-sizing: inherit;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            background-color: #ffffff;
            color: #333;
            overflow-x: hidden;
        }
        h1, h2 { 
            color: #333;
            font-weight: 400;
        }
        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            padding: 48px clamp(20px, 6vw, 40px) 96px;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        header h1 {
            margin-bottom: 5px;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #0077cc;
            text-decoration: none;
        }
        .back-link a:hover {
            text-decoration: underline;
        }
        .controls {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            margin: 18px 0 10px;
        }
        .toggle {
            display: inline-flex;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
        }
        .toggle-button {
            appearance: none;
            border: none;
            background: transparent;
            padding: 8px 10px;
            font-size: 14px;
            color: #555;
            cursor: pointer;
        }
        .toggle-button.is-active {
            background: #f4f4f4;
            color: #333;
        }
        .status {
            margin: 0 0 22px;
            color: #888;
            font-size: 14px;
            min-height: 18px;
        }
        .entry {
            margin-bottom: 22px;
        }
        .entry-title {
            margin: 0;
            font-size: 18px;
            font-weight: 500;
        }
        .entry-title a {
            color: #333;
            text-decoration: none;
        }
        .entry-title a:hover {
            text-decoration: underline;
        }
        .entry-meta {
            margin: 6px 0 0;
            color: #888;
            font-size: 14px;
        }
        .entry-meta a {
            color: #0077cc;
            text-decoration: none;
        }
        .entry-meta a:hover {
            text-decoration: underline;
        }
        .collection-heading {
            margin: 28px 0 12px;
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="index.html">← Main page</a>
        </div>
        <header>
            <h1>Notebooks</h1>
        </header>

        <div class="controls">
            <div class="toggle" role="group" aria-label="Notebook view">
                <button type="button" class="toggle-button is-active" data-view="chronological">Chronological</button>
                <button type="button" class="toggle-button" data-view="collections">Collections</button>
            </div>
        </div>
        <div id="status" class="status" aria-live="polite"></div>
        
        <section id="notebook-entries" aria-live="polite">
            <!-- BEGIN AUTO-GENERATED NOTEBOOK LIST -->
            <div class="entry" data-title="Confluence of browsers, agents and apps" data-date="2025-10-30" data-collection="AI Systems" data-tags="ai,browsers">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-30-confluence-browser-agents.md">Confluence of browsers, agents and apps</a></h3>
                <p class="entry-meta">2025-10-30 · <a href="notebooks.html?collection=AI%20Systems">AI Systems</a> · <a href="notebooks/2025-10-30-confluence-browser-agents.md">md</a></p>
            </div>

            <div class="entry" data-title="Autoformalization agents" data-date="2025-10-02" data-collection="Math &amp; Formal Methods" data-tags="math,ai,autoformalization">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-02-autoformalization-agents.md">Autoformalization agents</a></h3>
                <p class="entry-meta">2025-10-02 · <a href="notebooks.html?collection=Math%20%26%20Formal%20Methods">Math &amp; Formal Methods</a> · <a href="notebooks/2025-10-02-autoformalization-agents.md">md</a></p>
            </div>

            <div class="entry" data-title="New tasks and what matters" data-date="2025-10-01" data-collection="AI &amp; Society" data-tags="future,ai,work">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-10-01-new-tasks.md">New tasks and what matters</a></h3>
                <p class="entry-meta">2025-10-01 · <a href="notebooks.html?collection=AI%20%26%20Society">AI &amp; Society</a> · <a href="notebooks/2025-10-01-new-tasks.md">md</a></p>
            </div>

            <div class="entry" data-title="Stablecoins and new units of account" data-date="2025-09-08" data-collection="Finance" data-tags="banking,money,finance,crypto">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-stablecoins.md">Stablecoins and new units of account</a></h3>
                <p class="entry-meta">2025-09-08 · <a href="notebooks.html?collection=Finance">Finance</a> · <a href="notebooks/2025-09-stablecoins.md">md</a></p>
            </div>

            <div class="entry" data-title="Riding the displacement wave" data-date="2025-09-08" data-collection="AI &amp; Society" data-tags="ai,startups">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-08-riding-displacement.md">Riding the displacement wave</a></h3>
                <p class="entry-meta">2025-09-08 · <a href="notebooks.html?collection=AI%20%26%20Society">AI &amp; Society</a> · <a href="notebooks/2025-09-08-riding-displacement.md">md</a></p>
            </div>

            <div class="entry" data-title="RiskON 2025 design" data-date="2025-09-07" data-collection="Projects" data-tags="risk,hackathon">
                <h3 class="entry-title"><a href="notebook-viewer.html?entry=notebooks%2F2025-09-07-risk-on.md">RiskON 2025 design</a></h3>
                <p class="entry-meta">2025-09-07 · <a href="notebooks.html?collection=Projects">Projects</a> · <a href="notebooks/2025-09-07-risk-on.md">md</a></p>
            </div>
            <!-- END AUTO-GENERATED NOTEBOOK LIST -->
        </section>

        <noscript>
            <section aria-label="Notebook page without JavaScript" style="margin-top: 24px; color: #555;">
                <p>JavaScript is optional on this page; search and grouping are disabled without it.</p>
                <p style="color: #888;">The notebooks are also available directly as Markdown files under <code>notebooks/</code>.</p>
            </section>
        </noscript>
    </div>
    
    <script>
        (function () {
            const entriesContainer = document.getElementById('notebook-entries');
            const statusEl = document.getElementById('status');
            const toggleButtons = Array.from(document.querySelectorAll('.toggle-button[data-view]'));

            const params = new URLSearchParams(window.location.search);
            const initialTag = String(params.get('tag') || '').trim();
            const initialCollection = String(params.get('collection') || '').trim();

            const entryEls = Array.from(entriesContainer.querySelectorAll('.entry'));
            const entries = entryEls.map((el) => {
                const date = String(el.dataset.date || '').trim();
                const collection = String(el.dataset.collection || 'General').trim() || 'General';
                const tags = String(el.dataset.tags || '')
                    .split(',')
                    .map((t) => t.trim())
                    .filter(Boolean);
                const title = String(el.dataset.title || '').trim();
                return {
                    el,
                    date,
                    title,
                    collection,
                    collectionLower: collection.toLowerCase(),
                    tagsLower: tags.map((t) => t.toLowerCase()),
                };
            });

            const state = {
                view: 'chronological',
                tag: initialTag.toLowerCase(),
                collection: initialCollection.toLowerCase()
            };

            function sortChronological(a, b) {
                if (a.date && b.date && a.date !== b.date) {
                    return b.date.localeCompare(a.date);
                }
                if (a.date && !b.date) {
                    return -1;
                }
                if (!a.date && b.date) {
                    return 1;
                }
                return a.title.localeCompare(b.title);
            }

            function entryMatches(entry, q) {
                if (state.collection && entry.collectionLower !== state.collection) {
                    return false;
                }
                if (state.tag && !entry.tagsLower.includes(state.tag)) {
                    return false;
                }
                return true;
            }

            function renderChronological(filtered) {
                entriesContainer.replaceChildren(...filtered.map((e) => e.el));
            }

            function renderCollections(filtered) {
                const byCollection = new Map();
                for (const entry of filtered) {
                    const key = entry.collection || 'General';
                    if (!byCollection.has(key)) {
                        byCollection.set(key, []);
                    }
                    byCollection.get(key).push(entry);
                }

                const collections = Array.from(byCollection.keys()).sort((a, b) => a.localeCompare(b));
                const nodes = [];

                for (const collection of collections) {
                    const heading = document.createElement('h2');
                    heading.className = 'collection-heading';
                    heading.textContent = collection;
                    nodes.push(heading);

                    const groupEntries = byCollection.get(collection).slice().sort(sortChronological);
                    for (const entry of groupEntries) {
                        nodes.push(entry.el);
                    }
                }

                entriesContainer.replaceChildren(...nodes);
            }

            function setView(view) {
                state.view = view;
                for (const btn of toggleButtons) {
                    btn.classList.toggle('is-active', btn.dataset.view === view);
                }
                apply();
            }

            function apply() {
                const filtered = entries.filter((entry) => entryMatches(entry)).slice().sort(sortChronological);

                if (entries.length === 0) {
                    statusEl.textContent = '';
                    return;
                }

                if (state.view === 'collections') {
                    renderCollections(filtered);
                } else {
                    renderChronological(filtered);
                }

                const parts = [];
                parts.push(`${filtered.length} of ${entries.length}`);
                if (state.collection) {
                    parts.push(`collection: ${state.collection}`);
                }
                if (state.tag) {
                    parts.push(`tag: ${state.tag}`);
                }
                statusEl.textContent = parts.join(' · ');
            }

            for (const btn of toggleButtons) {
                btn.addEventListener('click', () => setView(String(btn.dataset.view || 'chronological')));
            }

            apply();
        })();
    </script>
</body>
</html>
